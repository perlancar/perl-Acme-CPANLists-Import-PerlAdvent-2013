<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Language" content="en" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="WWW::AdventCalendar v1.109" />
    <link rel="alternate" title="Perl Advent Calendar 2013 XML feed" href="atom.xml" type="application/atom+xml" />
    <link rel="shortcut icon" href="favicon.ico" />
    <link rel="stylesheet" href="style.css" type="text/css" />
    <link rel="stylesheet" href="2013.css" type="text/css" />
    <title>
Perl Advent Calendar 2013 - 
Pretty Pretty Pod

</title>
</head>
<body>
    <div id="contentwrapper">
        <div id="header">
            <h1><a href="index.html">Perl Advent Calendar 2013</a></h1>
        </div>

        <p id="tagline">twenty four merry days of Perl
          <a class='feed' href="atom.xml">Feed</a>
        </p>

        <div id="content">
          

<h1 class='title'>Pretty Pretty Pod</h1>
<div class='subtitle'>PPI::HTML and Text::VimColor - 2013-12-20</div>

<div class='pod'><h2 id="Why-is-the-Advent-calendars-code-so-good-looking">Why is the Advent calendar&#39;s code so good looking?</h2>

<p>I know some people don&#39;t like seeing their code in color. Someone once said to me, &quot;I stopped needing color in my books when I was a child, and I certainly don&#39;t need it in my code.&quot; This, I thought, was nuts.</p>

<p>If I was going to write a bunch of articles about code (when I started publishing an <a href="http://advent.rjbs.manxome.org/2009/">Advent calendar in 2009</a>) I didn&#39;t want to see this:</p>



<table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;<br />2:&nbsp;<br />3:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code>my @animals = (&quot;camel&quot;, &quot;llama&quot;, &quot;owl&quot;);<br />my @numbers = (23, 42, 69);<br />my @mixed   = (&quot;camel&quot;, 42, 1.23);</code><br />&nbsp;</td></table>

<p>I wanted to see this:</p>



<table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;<br />2:&nbsp;<br />3:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="keyword">my</span> <span class="symbol">@animals</span> <span class="operator">=</span> <span class="structure">(</span><span class="double">&quot;camel&quot;</span><span class="operator">,</span> <span class="double">&quot;llama&quot;</span><span class="operator">,</span> <span class="double">&quot;owl&quot;</span><span class="structure">);</span><br /><span class="keyword">my</span> <span class="symbol">@numbers</span> <span class="operator">=</span> <span class="structure">(</span><span class="number">23</span><span class="operator">,</span> <span class="number">42</span><span class="operator">,</span> <span class="number">69</span><span class="structure">);</span><br /><span class="keyword">my</span> <span class="symbol">@mixed</span>   <span class="operator">=</span> <span class="structure">(</span><span class="double">&quot;camel&quot;</span><span class="operator">,</span> <span class="number">42</span><span class="operator">,</span> <span class="float">1.23</span><span class="structure">);</span></code><br />&nbsp;</td></table>

<p>&hellip;and I really wanted writing article to be like writing normal Pod.</p>

<p>Oh, and sometimes I wanted to do something other than Perl:</p>



<table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;<br />2:&nbsp;<br />3:&nbsp;<br />4:&nbsp;<br />5:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="synIdentifier">dsn</span><span class="synSpecial">:</span> <span class="synConstant">&quot;dbi:SQLite:/home/rjbs/.awesome-stuff.sqlite&quot;</span><br /><span class="synIdentifier">lbj</span><span class="synSpecial">:</span> <span class="synSpecial">{</span> <span class="synIdentifier">guid</span><span class="synSpecial">:</span> 275dc6e0-6926-11e3-a944-0f63e4cda179 <span class="synSpecial">}</span><br /><span class="synIdentifier">alerts</span><span class="synSpecial">:</span><br />&nbsp;&nbsp;<span class="synIdentifier">hdr_from</span><span class="synSpecial">:</span> <span class="synConstant">'Alerty &lt;alerts@example.com&gt;'</span><br />&nbsp;&nbsp;<span class="synIdentifier">hdr_to</span><span class="synSpecial">  :</span> <span class="synConstant">'&quot;Ricardo Signes&quot; &lt;rjbs@cpan.org&gt;'</span></code><br />&nbsp;</td></table>

<p>Those two blocks above look, in the Pod, like this:</p>



<table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;<br />2:&nbsp;<br />3:&nbsp;<br />4:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code>#!perl<br />my @animals = (&quot;camel&quot;, &quot;llama&quot;, &quot;owl&quot;);<br />my @numbers = (23, 42, 69);<br />my @mixed   = (&quot;camel&quot;, 42, 1.23);</code><br />&nbsp;</td></table>

<p>and</p>



<table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;<br />2:&nbsp;<br />3:&nbsp;<br />4:&nbsp;<br />5:&nbsp;<br />6:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code>#!vim yaml<br />dsn: &quot;dbi:SQLite:/home/rjbs/.awesome-stuff.sqlite&quot;<br />lbj: { guid: 275dc6e0-6926-11e3-a944-0f63e4cda179 }<br />alerts:<br />&nbsp;&nbsp;hdr_from: &#39;Alerty &lt;alerts@example.com&gt;&#39;<br />&nbsp;&nbsp;hdr_to  : &#39;&quot;Ricardo Signes&quot; &lt;rjbs@cpan.org&gt;&#39;</code><br />&nbsp;</td></table>

<p>Those <code>#!perl</code> and <code>#!vim</code> lines are to blame for the garish spread of color! What are they doing?</p>

<h2 id="PPI::HTML">PPI::HTML</h2>

<p>The <code>#!perl</code> marker is picked up by <a href="https://metacpan.org/module/Pod::Elemental::Transformer::PPIHTML">Pod::Elemental::Transformer::PPIHTML</a>, and passes the rest of the code block to <a href="https://metacpan.org/module/PPI::HTML">PPI::HTML</a>. PPI::HTML uses <a href="https://metacpan.org/module/PPI">PPI</a>, a library for mostly-parsing Perl without running it, and turns Perl documents into HTML documents. For example, the simple Perl snippet above becomes this HTML:</p>



<table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;<br />2:&nbsp;<br />3:&nbsp;<br />4:&nbsp;<br />5:&nbsp;<br />6:&nbsp;<br />7:&nbsp;<br />8:&nbsp;<br />9:&nbsp;<br />10:&nbsp;<br />11:&nbsp;<br />12:&nbsp;<br />13:&nbsp;<br />14:&nbsp;<br />15:&nbsp;<br />16:&nbsp;<br />17:&nbsp;<br />18:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;keyword&quot;</span><span class="synIdentifier">&gt;</span>my<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span> <span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;symbol&quot;</span><span class="synIdentifier">&gt;</span>@animals<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span><br /><span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;operator&quot;</span><span class="synIdentifier">&gt;</span>=<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span> <span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><br /><span class="synConstant">&quot;structure&quot;</span><span class="synIdentifier">&gt;</span>(<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;double&quot;</span><span class="synIdentifier">&gt;</span>&quot;camel&quot;<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><br /><span class="synConstant">&quot;operator&quot;</span><span class="synIdentifier">&gt;</span>,<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span> <span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;double&quot;</span><span class="synIdentifier">&gt;</span>&quot;llama&quot;<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><br /><span class="synConstant">&quot;operator&quot;</span><span class="synIdentifier">&gt;</span>,<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span> <span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;double&quot;</span><span class="synIdentifier">&gt;</span>&quot;owl&quot;<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><br /><span class="synConstant">&quot;structure&quot;</span><span class="synIdentifier">&gt;</span>);<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;&lt;</span><span class="synStatement">br</span><span class="synIdentifier">&gt;</span><br /><span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;keyword&quot;</span><span class="synIdentifier">&gt;</span>my<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span> <span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;symbol&quot;</span><span class="synIdentifier">&gt;</span>@numbers<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span><br /><span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;operator&quot;</span><span class="synIdentifier">&gt;</span>=<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span> <span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><br /><span class="synConstant">&quot;structure&quot;</span><span class="synIdentifier">&gt;</span>(<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;number&quot;</span><span class="synIdentifier">&gt;</span>23<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><br /><span class="synConstant">&quot;operator&quot;</span><span class="synIdentifier">&gt;</span>,<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span> <span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;number&quot;</span><span class="synIdentifier">&gt;</span>42<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><br /><span class="synConstant">&quot;operator&quot;</span><span class="synIdentifier">&gt;</span>,<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span> <span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;number&quot;</span><span class="synIdentifier">&gt;</span>69<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><br /><span class="synConstant">&quot;structure&quot;</span><span class="synIdentifier">&gt;</span>);<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;&lt;</span><span class="synStatement">br</span><span class="synIdentifier">&gt;</span><br /><span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;keyword&quot;</span><span class="synIdentifier">&gt;</span>my<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span> <span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;symbol&quot;</span><span class="synIdentifier">&gt;</span>@mixed<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span><br /><span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;operator&quot;</span><span class="synIdentifier">&gt;</span>=<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span> <span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><br /><span class="synConstant">&quot;structure&quot;</span><span class="synIdentifier">&gt;</span>(<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;double&quot;</span><span class="synIdentifier">&gt;</span>&quot;camel&quot;<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><br /><span class="synConstant">&quot;operator&quot;</span><span class="synIdentifier">&gt;</span>,<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span> <span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;number&quot;</span><span class="synIdentifier">&gt;</span>42<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><br /><span class="synConstant">&quot;operator&quot;</span><span class="synIdentifier">&gt;</span>,<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span> <span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;float&quot;</span><span class="synIdentifier">&gt;</span>1.23<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><br /><span class="synConstant">&quot;structure&quot;</span><span class="synIdentifier">&gt;</span>);<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;&lt;</span><span class="synStatement">br</span><span class="synIdentifier">&gt;</span></code><br />&nbsp;</td></table>

<p>It&#39;s a bit gross, but the key thing is that distinct bit of syntax gets its own <code>&lt;span&gt;</code> with a class indicating what it is. PPI::HTML plus a bit of CSS gives you easy syntax highlighting for Perl.</p>

<p>Getting that HTML is trivial, too:</p>



<table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;<br />2:&nbsp;<br />3:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="keyword">my</span> <span class="symbol">$ppi_doc</span>  <span class="operator">=</span> <span class="word">PPI::Document</span><span class="operator">-&gt;</span><span class="word">new</span><span class="structure">(</span> <span class="cast">\</span><span class="symbol">$source_code</span> <span class="structure">);</span><br /><span class="keyword">my</span> <span class="symbol">$ppi_html</span> <span class="operator">=</span> <span class="word">PPI::HTML</span><span class="operator">-&gt;</span><span class="word">new</span><span class="structure">;</span><br /><span class="word">print</span> <span class="symbol">$ppi_html</span><span class="operator">-&gt;</span><span class="word">html</span><span class="structure">(</span> <span class="symbol">$ppi_doc</span> <span class="structure">);</span></code><br />&nbsp;</td></table>

<h2 id="Text::VimColor">Text::VimColor</h2>

<p>PPI, of course, only parses Perl documents. For almost everything else, there&#39;s Text::VimColor. I spent a lot of time looking for generic, pluggable syntax highlighting before finally realizing that the only thing that ever did a good job for me was my text editor. It turned out that I could get my text editor to do the work for me here, too!</p>

<p>The YAML above becomes roughly this HTML:</p>



<table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;<br />2:&nbsp;<br />3:&nbsp;<br />4:&nbsp;<br />5:&nbsp;<br />6:&nbsp;<br />7:&nbsp;<br />8:&nbsp;<br />9:&nbsp;<br />10:&nbsp;<br />11:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;synIdentifier&quot;</span><span class="synIdentifier">&gt;</span>dsn<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;synSpecial&quot;</span><span class="synIdentifier">&gt;</span>:<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span> <br /><span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;synConstant&quot;</span><span class="synIdentifier">&gt;</span><span class="synSpecial">&amp;quot;</span>dbi:SQLite:/home/rjbs/.awesome-stuff.sqlite<span class="synSpecial">&amp;quot;</span><span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span><br /><span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;synIdentifier&quot;</span><span class="synIdentifier">&gt;</span>lbj<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;synSpecial&quot;</span><span class="synIdentifier">&gt;</span>:<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span> <br /><span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;synSpecial&quot;</span><span class="synIdentifier">&gt;</span>{<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span><br />&nbsp;&nbsp;<span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;synIdentifier&quot;</span><span class="synIdentifier">&gt;</span>guid<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;synSpecial&quot;</span><span class="synIdentifier">&gt;</span>:<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span> <br />&nbsp;&nbsp;275dc6e0-6926-11e3-a944-0f63e4cda179 <span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;synSpecial&quot;</span><span class="synIdentifier">&gt;</span>}<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span><br /><span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;synIdentifier&quot;</span><span class="synIdentifier">&gt;</span>alerts<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;synSpecial&quot;</span><span class="synIdentifier">&gt;</span>:<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span><br /><span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;synIdentifier&quot;</span><span class="synIdentifier">&gt;</span>hdr_from<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;synSpecial&quot;</span><span class="synIdentifier">&gt;</span>:<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span> <br /><span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;synConstant&quot;</span><span class="synIdentifier">&gt;</span>'Alerty <span class="synSpecial">&amp;lt;</span>alerts@example.com<span class="synSpecial">&amp;gt;</span>'<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span><br /><span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;synIdentifier&quot;</span><span class="synIdentifier">&gt;</span>hdr_to<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;synSpecial&quot;</span><span class="synIdentifier">&gt;</span>  :<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span> <br /><span class="synIdentifier">&lt;</span><span class="synStatement">span</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;synConstant&quot;</span><span class="synIdentifier">&gt;</span>'<span class="synSpecial">&amp;quot;</span>Ricardo Signes<span class="synSpecial">&amp;quot;</span> <span class="synSpecial">&amp;lt;</span>rjbs@cpan.org<span class="synSpecial">&amp;gt;</span>'<span class="synIdentifier">&lt;/</span><span class="synStatement">span</span><span class="synIdentifier">&gt;</span></code><br />&nbsp;</td></table>

<p>&hellip;once again from a trivial program:</p>



<table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;<br />2:&nbsp;<br />3:&nbsp;<br />4:&nbsp;<br />5:&nbsp;<br />6:&nbsp;<br />7:&nbsp;<br />8:&nbsp;<br />9:&nbsp;<br />10:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="keyword">use</span> <span class="word">Text::VimColor</span><span class="structure">;</span><br /><span class="keyword">my</span> <span class="symbol">$syntax</span> <span class="operator">=</span> <span class="word">Text::VimColor</span><span class="operator">-&gt;</span><span class="word">new</span><span class="structure">(</span><br />&nbsp;&nbsp;<span class="word">string</span>   <span class="operator">=&gt;</span> <span class="symbol">$yaml_octets</span><span class="operator">,</span><br />&nbsp;&nbsp;<span class="word">filetype</span> <span class="operator">=&gt;</span> <span class="single">'yaml'</span><span class="operator">,</span><br />&nbsp;&nbsp;<span class="word">vim_options</span> <span class="operator">=&gt;</span> <span class="structure">[</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="words">qw( -RXZ -i NONE -u NONE -N -n )</span><span class="operator">,</span> <span class="double">&quot;+set nomodeline&quot;</span><span class="operator">,</span> <span class="single">'+set fenc=utf-8'</span><span class="operator">,</span><br />&nbsp;&nbsp;<span class="structure">]</span><span class="operator">,</span><br /><span class="structure">);</span><br /><br /><span class="word">print</span> <span class="symbol">$syntax</span><span class="operator">-&gt;</span><span class="word">html</span><span class="structure">;</span></code><br />&nbsp;</td></table>

<p>The only cryptic thing here might be the Vim options:</p>

<pre><code>  -R       -- read only
  -X       -- no X11
  -Z       -- restricted mode; no running the shell!
  -N       -- not vi-compatible
  -n       -- no swapfile
  -i NONE  -- no viminfo
  -u NONE  -- no vimrc</code></pre>

<p>&hellip;and the fact that we need to provide the string of source as octets, not a character string, and provide the encoding to Vim. Otherwise, you may encounter some unwanted cleverness.</p>

<h2 id="The-CSS">The CSS</h2>

<p>The CSS used for this is also dead simple:</p>



<table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;<br />2:&nbsp;<br />3:&nbsp;<br />4:&nbsp;<br />5:&nbsp;<br />6:&nbsp;<br />7:&nbsp;<br />8:&nbsp;<br />9:&nbsp;<br />10:&nbsp;<br />11:&nbsp;<br />12:&nbsp;<br />13:&nbsp;<br />14:&nbsp;<br />15:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="synComment">/* PPI HTML Style */</span><br /><br /><span class="synIdentifier">.code-listing</span> <span class="synIdentifier">.keyword</span>   <span class="synIdentifier">{</span> <span class="synType">color</span>: <span class="synConstant">#89f</span>; <span class="synIdentifier">}</span><br /><span class="synIdentifier">.code-listing</span> <span class="synIdentifier">.match</span>     <span class="synIdentifier">{</span> <span class="synType">color</span>: <span class="synConstant">#ff0</span>; <span class="synIdentifier">}</span><br /><span class="synComment">/* ... */</span><br /><span class="synIdentifier">.code-listing</span> <span class="synIdentifier">.single</span><span class="synSpecial">,</span><br /><span class="synIdentifier">.code-listing</span> <span class="synIdentifier">.double</span>    <span class="synIdentifier">{</span> <span class="synType">color</span>: <span class="synConstant">#0cf</span>; <span class="synIdentifier">}</span><br /><br /><span class="synComment">/* Vim Syntax Style */</span><br /><br /><span class="synIdentifier">.code-listing</span> <span class="synIdentifier">.synComment</span>    <span class="synIdentifier">{</span> <span class="synType">color</span>: <span class="synConstant">#0f0</span>; <span class="synIdentifier">}</span><br /><span class="synIdentifier">.code-listing</span> <span class="synIdentifier">.synConstant</span>   <span class="synIdentifier">{</span> <span class="synType">color</span>: <span class="synConstant">#0ff</span>; <span class="synIdentifier">}</span><br /><span class="synComment">/* ... */</span><br /><span class="synIdentifier">.code-listing</span> <span class="synIdentifier">.synError</span>      <span class="synIdentifier">{</span> <span class="synType">color</span>: <span class="synConstant">#f00</span>; <span class="synIdentifier">}</span><br /><span class="synIdentifier">.code-listing</span> <span class="synIdentifier">.synTodo</span>       <span class="synIdentifier">{</span> <span class="synType">color</span>: <span class="synConstant">#aa0</span>; <span class="synIdentifier">}</span></code><br />&nbsp;</td></table>

<p>It&#39;s generated, of course, by <a href="http://xn--8dbbfrx.rjbs.manxome.org/2011/2011-12-21.html">Color::Palette</a>.</p>

<h2 id="Highlight-everything">Highlight everything!</h2>

<p>Now that you see how easy it is to get nicely syntax highlighted HTML for any hunk of code you have lying around, <i>do it!</i> It can often help make bland documentation or other writing much easier to skim. Even better, since the output is pretty simple HTML, you can edit the output as needed to fix glitches or add further highlighting.</p>

<h2 id="See-Also">See Also</h2>

<ul>

<li><p><a href="https://metacpan.org/module/Text::VimColor">Text::VimColor</a></p>

</li>
<li><p><a href="https://metacpan.org/module/PPI::HTML">PPI::HTML</a></p>

</li>
<li><p><a href="https://metacpan.org/module/Pod::Elemental::Transformer::VimHTML">Pod::Elemental::Transformer::VimHTML</a></p>

</li>
<li><p><a href="https://metacpan.org/module/Pod::Elemental::Transformer::PPIHTML">Pod::Elemental::Transformer::PPIHTML</a></p>

</li>
<li><p><a href="https://metacpan.org/module/WWW::AdventCalendar">WWW::AdventCalendar</a></p>

</li>
</ul>

</div>

<div id='author'>
<img alt='Gravatar Image' style='vertical-align:middle' src=http://www.gravatar.com/avatar/cec6b9b88295ead26c65f8747a76561b?r=g&s=80&d=retro />
This article contributed by: Ricardo Signes &lt;rjbs@cpan.org&gt;
</div>


<ul id="pager">
    <li class="previous"><a title="More Moose, More Discipline" href="2013-12-19.html">Previous</a></li>

    <li class="next"><a title="Bashing Perl5" href="2013-12-21.html">Next</a></li>
</ul>
<div style="clear: both"></div>

        </div>
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-27056407-1");
pageTracker._trackPageview();
} catch(err) {}</script>
</body>
</html>



